<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>&lt;h1&gt;Build from source&lt;/h1&gt;</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.8.20 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title"><h1>Build from source</h1>
</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><pre class="fragment"> ///////////////////////////////////////////////////////////////////////////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 IMPORTANT : if building from a git clone of 
     https://github.com/gbarrand/MEMPHYS_vis.git
 before building you have to bring the file : g4ndl_4_5.zip from one of the release and deposit it under :
     MEMPHYS_vis/MEMPHYS_vis/comres
 It appears that this file exceeds the 100 Mbytes limit of github and can't go in the repository, but is
 definitely needed to run the app and have to go also in the built distribution zip file. Then be sure
 to have it in comres before building.

 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 /// build by using the default inexlib/ourex/geant4 : /////////////////////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
  To build :
    UNIX&gt; cd &lt;app&gt;/mgr
    UNIX&gt; ./build  # Cocoa version on macOS, X11 on Linux, X11 under Windows-10/WSL and
                   # win32 from a Windows-10/cygwin bash prompt.
  ( UNIX&gt; ./build -v)
   macOS&gt; ./build -x11 -bin_x11  # to build the X11 version if being on macOS.
    UNIX&gt; ./build -offscreen -bin_offscreen
  cygwin&gt; ./build -gnu -x11  # to build under Windows-10/cygwin by using the cygwin g++
                             # and cygwin X11 client environment.
    
 (here UNIX is for Linux, macOS, Windows-10/cygwin, Windows-10/WSL)

  For Windows-10/win32, the build bush scripts assumes that VisualC++ had been "source setup".
 See the softinex portal/bush/Prerequisites/Windows-10 section for more.

  If the GNU parallel application is known from your prompt, you can use the "-parallel"
 option so that C and C++ file compilations are distributed on your cores. This feature
 had been tested with success on macOS with a MacPorts installation of the GNU parallel program
 and on centos7 by using the GNU distribution. Since good part of the code of our
 apps is pure header, it will not boost the "main" part of them, but it clearly boosts the
 build of the ourex externals, in particular if using some ourex/geant4&lt;versio&gt; one.

  At end, you should have a distribution file :
    bin_&lt;config&gt;/distrib/&lt;app&gt;-&lt;version&gt;-&lt;platform&gt;.zip
    
  To run :
    UNIX&gt; cd &lt;app&gt;/mgr
 the offscreen version :
    UNIX&gt; ./bin_offscreen/distrib/&lt;app&gt;/&lt;version&gt;/bin/&lt;app&gt;
 the OSX Cocoa version :
   macOS&gt; open ./bin_sdk_mac/distrib/&lt;app&gt;/&lt;version&gt;/&lt;app&gt;.app
 the OSX X11 version :
   macOS&gt; ./bin_x11/distrib/&lt;app&gt;/&lt;version&gt;/bin/&lt;app&gt;
 the Linux X11 version :
   Linux&gt; ./bin_gnu/distrib/&lt;app&gt;/&lt;version&gt;/bin/&lt;app&gt;
 the Windows win32 version :
  cygwin&gt; ./bin_visual/distrib/&lt;app&gt;/&lt;version&gt;/bin/&lt;app&gt;.exe

  See the &lt;app&gt; section on http://gbarrand.github.io for more.

 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 /// For apps related to geant4 (g4exa, g4view, MEMPHYS, MEMPHYS_vis) : ////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
  The packing comes with a inexlib/ourex/geant4&lt;version&gt; in sync with the code of the app, and the build
 can proceed by using the upper commands, but you may want to build the app by using an already installed
 geant4. As our distribution packing (done with bush/app_distrib) does not handle (yet) shared libraries,
 you must have a geant4 built with archive libs (&lt;geant4_install_dir&gt;/[lib,lib64]/libG4FR.a, etc...).
 If not, a below "build -sys_geant4" will stop. (The check for geant4 archives is done by
 bush/use/geant4&lt;version&gt;). We remember that to have archive libraries for geant4, you have to build
 it with the cmake option "-DBUILD_STATIC_LIBS=ON" (and "-DBUILD_SHARED_LIBS=ON" to have also shared libs).

  Then to build the app distribution :
    UNIX&gt; cd &lt;app&gt;/mgr

      sh&gt; . &lt;geant4_install_dir&gt;/bin/geant4.sh
   ( csh&gt; source &lt;geant4_install_dir&gt;/bin/geant4.csh )
    UNIX&gt; geant4-config  # to test that this program is here.

   Linux&gt; &lt;if needed source setup a gcc_[version].[sh,csh] file to have the correct g++&gt;
   ( csh&gt; source gcc_493.csh # on Lund iridium )
    UNIX&gt; ./build -sys_geant4     # -sys_geant4 to use the geant4 pointed by geant4-config.
  ( UNIX&gt; ./build -sys_geant4 -v  # to see built files.)
  ( UNIX&gt; ./build -sys_geant4 -x  # for a full trace.)

   macOS&gt; ./build -sys_geant4 -x11 -bin_x11 # to build the X11 version on macOS.

  At end, you should have a distribution file :
    bin_&lt;config&gt;/distrib/&lt;app&gt;-&lt;version&gt;-&lt;platform&gt;.zip

 WARNING, WARNING, WARNING, WARNING, WARNING, WARNING, WARNING, WARNING, WARNING :
  If running from the build area by having done the "source geant4 setup", be sure that the
 environment variables : G4NEUTRONHPDATA, G4LEDATA, G4LEVELGAMMADATA, G4ENSDFSTATEDATA, G4SAIDXSDATA
 points to valid Geant4 data directories. If not, you are going to have crashes at startup.
 The best, if building by using an installed geant4 (a "sys_geant4"), is to run the app from
 a brand new shell.

 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////
 ///////////////////////////////////////////////////////////////////////////////////////////////////////</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->

</body>
</html>
